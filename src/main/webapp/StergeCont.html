<!DOCTYPE html>
<html lang="en">
<head>
    <title>Sterge cont</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link href="style.css" rel="stylesheet">
</head>
<body>
<div class="container px-4 py-5 px-md-5 text-center text-lg-start my-5">
    <div class="row gx-lg-5 align-items-center mb-5">
        <div class="col-lg-6 mb-5 mb-lg-0" id="errorMessage" style="z-index: 10; color:red">
        </div>

        <div class="col-lg-6 mb-5 mb-lg-0 position-center">
            <div class="position-absolute rounded-circle shadow-5-strong" id="radius-shape-1"></div>
            <div class="position-absolute shadow-5-strong" id="radius-shape-2"></div>
            <div class="card bg-glass">
                <div class="card-body px-4 py-5 px-md-5">

                    <form id="removeuser" method='delete'>
                        <div class="form-outline mb-4">
                            <label class="form-label" for="removeuser">E-mail</label>
                            <input class="form-control" id="emailId" name="email" type="email"/>
                        </div>

                        <div class="form-outline mb-4">
                            <label class="form-label" for="removeuser">Parola curenta</label>
                            <input class="form-control" id="passwordId" name="password" type="password"/>
                        </div>
                    </form>
                    <button class="btn btn-primary btn-block mb-4" onclick="removeuser()">
                        Sterge cont
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
            function removeuser() {
            if(confirm("Are you sure you want to delete this Record?")){
                const xhttp = new XMLHttpRequest();
                  xhttp.onload = function() {
                    console.log(this.responseText);

                    document.getElementById("errorMessage").innerHTML = this.responseText;
                  }
                  xhttp.open("DELETE", getURL());
                  xhttp.send();
            }
        }

        function getURL() {
            var email = document.getElementById("emailId");
            var oldPassword = document.getElementById("passwordId");
            var url = "removeuser?email=" + email.value;
            url += "&password=" + oldPassword.value;
            return url;
        }

    </script>
</body>
</html>